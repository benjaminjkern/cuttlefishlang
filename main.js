/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===a(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}var i=function(t){return function(t){return"object"===a(t)&&!Array.isArray(t)}(t)?t:t.reduce((function(t,e){return n(n({},t),{},o({},e,!0))}),{})},u=function(e){return function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e.apply(void 0,t(n.map(i)))}},c=u((function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return 0===n.length?e:c.apply(void 0,[i([].concat(t(Object.keys(e)),t(Object.keys(n[0]))))].concat(t(n.slice(1))))})),l=u((function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return 0===n.length?e:l.apply(void 0,[i(Object.keys(e).filter((function(t){return n[0][t]})))].concat(t(n.slice(1))))})),s=u((function(t,e){return i(Object.keys(t).filter((function(t){return!e[t]})))}));function f(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===m(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}u((function(t,e){return Object.keys(l(t,e)).length===Object.keys(t).length}));var b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof t||!t.length)throw"ANYCHAR(whitelist): whitelist must be a string of characters to include!";return{metaType:"anychar",tokenDict:{whitelist:i(e?t.split("").flatMap((function(t){return[t.toLowerCase(),t.toUpperCase()]})):t.split(""))}}},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!=typeof t)throw"NOTCHAR(blacklist): blacklist must be a string of characters to exclude!";return{metaType:"anychar",tokenDict:{blacklist:i(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t.split("").flatMap((function(t){return[t.toLowerCase(),t.toUpperCase()]})):t.split(""))}}},g=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return{metaType:"or",patterns:e.map((function(t){return S(t)?t:[t]}))}},w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return{metaType:"multi",pattern:S(t)?t:[t],min:e,max:r}},x=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return w(e,0,1)},S=function(t){return"object"===m(t)&&void 0!==t.length},O=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return{type:t,subtypes:r}},j=0,E=function(t,e){return function(){if(k.log)return t[e].bind(t).apply(void 0,arguments)}},k={exitOnError:!0,log:!0,colors:!0,debug:!1,inspect:console.log,consoleWrite:"undefined"!=typeof process?E(process.stdout,"write"):function(){},consoleLog:E(console,"log"),consoleWarn:E(console,"warn"),consoleError:E(console,"error")},A=function(){return k.consoleWrite.apply(k,arguments)},I=function(){return k.consoleWarn.apply(k,arguments)};function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}var T=["tokens"],N=["tokens"];function L(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?L(Object(r),!0).forEach((function(e){_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==P(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===P(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}const C=function(t){return Object.keys(t).forEach((function(e){t[e].forEach((function(t,r){var n=t.spaces,o=void 0===n?"ignore":n,a=t.evaluate,i=void 0===a?function(t){var n=t.tokens,o=t.context;return n.length>1&&I("Warning: Evaluating rule ".concat(r,' in type "').concat(e,'" with default evaluation, ignoring all tokens aside from the first.')),o.evaluateExpression(n[0])}:a,u=t.onParse;switch(t.evaluate=i,o){default:I("Warning: Rule ".concat(r,' in type "').concat(e,'" has invalid spaces configuration: "').concat(o,'", defaulting to default (ignore).'));case"require":case"ignore":t.pattern=t.pattern.flatMap((function(e,r){return r===t.pattern.length-1?e:[e,w(O("space"),"require"===o?1:0)]})),u&&(t.onParse=function(t){var e=t.tokens,r=M(t,T);return u(D({tokens:e.filter((function(t,e){return e%2==0}))},r))}),t.evaluate=function(t){var e=t.tokens,r=M(t,N);return i(D({tokens:e.filter((function(t,e){return e%2==0}))},r))};case"specify":}}))})),t};function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var G=function(t,e){return k.colors?t[e]:t},H=["Error","Parsing Error","Preparsing Error","Runtime Exception"],$=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Error";H.includes(r)||I("Warning: ".concat(r," is not an allowed error type."));var n="".concat(r,": ").concat(e?"Line ".concat(e,": "):"").concat(t);if(function(){k.consoleError.apply(k,arguments)}(n),!k.exitOnError)throw n;process.exit(-1)},U=function t(e){if("object"!==R(e))return e;if(void 0!==e.length)return e.map(t);var r={};for(var n in e)r[n]=t(e[n]);return r},B=0,W=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"f",r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return function(){for(var o,a=arguments.length,i=new Array(a),u=0;u<a;u++)i[u]=arguments[u];if(!k.debug)return t.apply(void 0,i);var c,l=Array(B).fill("   ").join("");(o=console).log.apply(o,["".concat(l).concat(e)].concat(function(t){if(Array.isArray(t))return F(t)}(c=i.map((function(t,e){return r?r[e]?"function"==typeof r[e]?r[e](t):t:null:t})).filter((function(t){return null!==t})))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(c)||function(t,e){if(t){if("string"==typeof t)return F(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(t,e):void 0}}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),["{"])),B++;var s=t.apply(void 0,i);return B--,console.log("".concat(l,"}"),"->",s.error?s.error:n?"function"==typeof n?n(s):n:s),s}};function X(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const q={String:[{pattern:['"',w(d('"')),'"'],spaces:"specify",evaluate:function(t){var e=t.sourceString;return e.substring(1,e.length-1)}},{pattern:["'",w(d('"')),"'"],spaces:"specify",evaluate:function(t){var e=t.sourceString;return e.substring(1,e.length-1)}},{pattern:[O("stringlike"),"++",O("stringlike")],evaluate:function(t){var e=X(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return"".concat(o.evaluateExpression(r)).concat(o.evaluateExpression(n))}},{pattern:[O("stringlike"),"**",O("Integer")],evaluate:function(t){var e=X(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context,a=o.evaluateExpression(n),i=o.evaluateExpression(r);return Array(a).fill(i).join("")}}],stringlike:[{pattern:[g(O("Number"),O("String"),O("Boolean"))]}]};function V(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return z(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const J={Statement:[{pattern:["print",g(O("Function"),O("Iterable"),O("stringlike"))],evaluate:function(t){var e=V(t.tokens,2),r=(e[0],e[1]),n=t.context;K(n.evaluateExpression(r)),A("\n")}},{pattern:[O("varName"),"=",O("Object")],evaluate:function(t){var e=V(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context,a=o.evaluateExpression(n);o.setVariable(r.sourceString,n.tokens[0][0].type,a)}},{pattern:["break"],evaluate:function(t){var e=t.lineNumber,r=t.context;if(!r.inLoop)throw $("Cannot use break outside of loop!",e,"Runtime Exception");r.breakingLoop=!0}},{pattern:["continue"],evaluate:function(t){var e=t.lineNumber,r=t.context;if(!r.inLoop)throw $("Cannot use continue outside of loop!",e,"Runtime Exception");r.breakingLoop=!0}},{pattern:["if",O("Boolean"),":",x(O("Statement"))],evaluate:function(t){var e=V(t.tokens,4),r=(e[0],e[1]),n=(e[2],e[3]),o=t.context,a=o.evaluateExpression(r);a&&o.evaluateExpression(n,o),o.ranIfStatement=a}},{pattern:["else",x(":"),O("Statement")],evaluate:function(t){var e=V(t.tokens,3),r=(e[0],e[1],e[2]),n=t.context,o=n.ranIfStatement;if(void 0===o)throw $("`else` statement must follow an `if` statement!",void 0,"Semantics Error");o||n.evaluateExpression(r,n)}}],varName:[{pattern:[w(b("abcdefghijklmnopqrstuvwxyz_",!0),1)]}]};var K=function t(e){if(e.hasNext){e.restart();var r=e.hasNext()?" ":"";for(A("[".concat(r));e.hasNext();)t(e.next()),e.hasNext()&&A(", ");A("".concat(r,"]"))}else{if(!e.call)return A(e+"");A(e.asString)}};function Q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Z(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var tt=function(t,e,r){var n=e.inLoop;for(e.inLoop=!0;t();){for(e.continuingLoop=!1,e.breakingLoop=!1,r.restart();r.hasNext()&&(r.next(),!e.continuingLoop&&!e.breakingLoop););if(e.breakingLoop)break}e.inLoop=n};const et={Instantiator:[{pattern:["if",O("Boolean"),":"],evaluate:function(t){var e=Q(t.tokens,2),r=(e[0],e[1]),n=t.childIterator,o=t.context,a=o.evaluateExpression(r);a&&n.iterateToEnd(),o.ranIfStatement=a}},{pattern:["else",":"],evaluate:function(t){var e=t.context,r=t.childIterator,n=e.ranIfStatement;if(void 0===n)throw $("`else` statement must follow an `if` statement!",void 0,"Semantics Error");n||r.iterateToEnd()}},{pattern:["while",O("Boolean"),":"],evaluate:function(t){var e=Q(t.tokens,2),r=(e[0],e[1]),n=t.childIterator,o=t.context;tt((function(){return o.evaluateExpression(r)}),o,n)}},{pattern:["repeat",x(O("Integer")),":"],evaluate:function(t){var e=Q(t.tokens,2),r=(e[0],e[1]),n=t.context,o=t.childIterator,a=0;tt((function(){return a++,!r.length||a<n.evaluateExpression(r)}),n,o)}},{pattern:["for",O("Iterable"),x(":")],evaluate:function(t){var e=Q(t.tokens,2),r=(e[0],e[1]),n=t.context,o=t.childIterator,a=n.evaluateExpression(r).clone();tt((function(){if(!a.hasNext())return!1;var t=a.next();return n.setVariable("$",rt(t),t),!0}),n,o)}}]};var rt=function(t){return"number"==typeof t?"Number":"string"==typeof t?"String":"boolean"==typeof t?"Boolean":Array.isArray(t)?"Iterable":"Object"};function nt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ot(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ot(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const at={Boolean:[{pattern:[O("Boolean"),"or",O("Boolean")],evaluate:function(t){var e=nt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)||o.evaluateExpression(n)}},{pattern:[O("Boolean"),"and",O("Boolean")],evaluate:function(t){var e=nt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)&&o.evaluateExpression(n)}},{pattern:[O("Boolean"),"xor",O("Boolean")],evaluate:function(t){var e=nt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return Boolean(o.evaluateExpression(r)^o.evaluateExpression(n))}},{pattern:["not",O("Boolean")],evaluate:function(t){var e=nt(t.tokens,2),r=(e[0],e[1]);return!t.context.evaluateExpression(r)}},{pattern:[O("Number"),"<",O("Number")],evaluate:function(t){var e=nt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)<o.evaluateExpression(n)}},{pattern:[O("Number"),"<=",O("Number")],evaluate:function(t){var e=nt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)<=o.evaluateExpression(n)}},{pattern:[O("Number"),">",O("Number")],evaluate:function(t){var e=nt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)>o.evaluateExpression(n)}},{pattern:[O("Number"),">=",O("Number")],evaluate:function(t){var e=nt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)>=o.evaluateExpression(n)}},{pattern:[O("Object"),"==",O("Object")],evaluate:function(t){var e=nt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)===o.evaluateExpression(n)}},{pattern:[O("Object"),"in",O("Iterable")],evaluate:function(t){var e=nt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context,a=o.evaluateExpression(n).clone(),i=o.evaluateExpression(r);if(a.itemInIterator)return a.itemInIterator(i);for(I("Warning: Iterator `in` operation running in iteration mode!");a.hasNext();)if(a.next()===i)return!0;return!1}},{pattern:[O("boollit")]}],boollit:[{pattern:["true"],evaluate:function(){return!0}},{pattern:["false"],evaluate:function(){return!1}}]},it={Dictionary:[{pattern:[O("dictlit")]}],dictlit:[{pattern:["{","}"]}]};function ut(t){return function(t){if(Array.isArray(t))return st(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||lt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(t,e)||lt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(t,e){if(t){if("string"==typeof t)return st(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?st(t,e):void 0}}function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ft=function t(e){var r=e.start,n=e.step,o=e.end,a=void 0===o?null:o,i=e.includeEnd,u=void 0!==i&&i,c=e.includeStart,l=void 0===c||c,s=r-n*l;return{hasNext:function(){return null===a||!((s+n-a)*n>=0)||s+n===a&&u},next:function(){return s+=n},restart:function(){return s=r-n*l},clone:function(){return t({start:r,step:n,end:a,includeEnd:u,includeStart:l})},getIndex:function(t){var e=r+n*!l+n*t;return null!==a&&(e-a)*n>=0?e===a&&u?e:void 0:e},length:null===a?null:Math.floor((a-r)/n),itemInIterator:function(t){return"number"==typeof t&&(t-r)%n==0&&(t-r)*n>=0&&(null===a||(t-a)*n<0||t===a&&u)}}},pt=function t(e){if(!Array.isArray(e))throw"Tried making list out of something that is NOT a list";var r=0,n={next:function(){if(!n.hasNext())throw"Tried calling iterator.next() when it do not have a next!";return r++,e[r-1]},hasNext:function(){return r<e.length},restart:function(){return r=0},clone:function(){return t(e)},getIndex:function(t){return e[t]},length:e.length,itemInIterator:function(t){return e.includes(t)}};return n},yt=function t(e,r){null===e.length&&I("Warning: Concatenating a to an infinite iterable (The second iterable will never run)");var n={usingIteratorA:e.hasNext(),next:function(){if(n.usingIteratorA){var t=e.next();return n.usingIteratorA=e.hasNext(),t}return r.next()},hasNext:function(){return n.usingIteratorA?e.hasNext():r.hasNext()},restart:function(){e.restart(),r.restart(),n.usingIteratorA=e.hasNext()},clone:function(){return t(e.clone(),r.clone())},getIndex:function(t){return null===e.length||t<e.length?e.getIndex(t):r.getIndex(t-e.length)},itemInIterator:function(t){return e.itemInIterator(t)||r.itemInIterator(t)}};return n};const vt={Iterable:[{pattern:[O("DiscreteRange")],evaluate:function(t){var e=ct(t.tokens,1)[0],r=t.context;return ft(r.evaluateExpression(e))}},{pattern:[O("List")],evaluate:function(t){var e=ct(t.tokens,1)[0],r=t.context;return pt(r.evaluateExpression(e))}},{pattern:[O("Iterable"),"++",O("Iterable")],evaluate:function(t){var e=ct(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return yt(o.evaluateExpression(r).clone(),o.evaluateExpression(n).clone())}},{pattern:[O("Iterable"),"**",O("Integer")],evaluate:function(t){var e=ct(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context,a=o.evaluateExpression(n);if(a<=0)return pt([]);for(var i=o.evaluateExpression(r),u=i.clone();--a>0;)u=yt(u.clone(),i.clone());return u}}],List:[{pattern:[O("List"),"++",O("List")],evaluate:function(t){var e=ct(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return[].concat(ut(o.evaluateExpression(r)),ut(o.evaluateExpression(n)))}},{pattern:[O("List"),"**",O("Integer")],evaluate:function(t){var e=ct(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context,a=o.evaluateExpression(n);if(a<=0)return[];for(var i=o.evaluateExpression(r),u=ut(i);--a>0;)u.push.apply(u,ut(i));return u}},{pattern:[O("listlit")]}],listlit:[{pattern:["[",x(O("commaSeparatedObjects")),"]"],evaluate:function(t){var e=ct(t.tokens,2),r=(e[0],e[1]),n=t.context;return 0===r.length?[]:n.evaluateExpression(r)}}],commaSeparatedObjects:[{pattern:[O("Object"),w([",",w(O("space")),O("Object"),w(O("space"))]),x(",")],evaluate:function(t){var e=ct(t.tokens,2),r=e[0],n=ct(e[1],3),o=(n[0],n[1],n[2]),a=t.context;return[a.evaluateExpression(r)].concat(ut(o?o.map(a.evaluateExpression):[]))}}],DiscreteRange:[{pattern:["[",O("Number"),"..","]"],evaluate:function(t){var e=ct(t.tokens,2),r=(e[0],e[1]);return{start:t.context.evaluateExpression(r),step:1}}},{pattern:["[",O("Number"),"..",O("Number"),"]"],evaluate:function(t){var e=ct(t.tokens,4),r=(e[0],e[1]),n=(e[2],e[3]),o=t.context;return{start:o.evaluateExpression(r),step:1,end:o.evaluateExpression(n)}}},{pattern:["[",O("Number"),"..",O("Number"),"..","]"],evaluate:function(t){var e=ct(t.tokens,4),r=(e[0],e[1]),n=(e[2],e[3]),o=t.context;return{start:o.evaluateExpression(r),step:o.evaluateExpression(n)}}},{pattern:["[",O("Number"),"..",O("Number"),"..",O("Number"),"]"],evaluate:function(t){var e=ct(t.tokens,6),r=(e[0],e[1]),n=(e[2],e[3]),o=(e[4],e[5]),a=t.context;return{start:a.evaluateExpression(r),step:a.evaluateExpression(n),end:a.evaluateExpression(o)}}}]};function ht(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return mt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const bt={Number:[{pattern:[O("Integer")]},{pattern:[O("Number"),"+",O("Number")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=ht(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)+o.evaluateExpression(n)}},{pattern:[O("Number"),"-",O("Number")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=ht(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)-o.evaluateExpression(n)}},{pattern:[O("Number"),"*",O("Number")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=ht(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)*o.evaluateExpression(n)}},{pattern:[O("Number"),"/",O("Number")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=ht(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)/o.evaluateExpression(n)}},{pattern:[O("Number"),"^",O("Number")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=ht(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return Math.pow(o.evaluateExpression(r),o.evaluateExpression(n))}},{pattern:["-",O("Number")],evaluate:function(t){var e=ht(t.tokens,2),r=(e[0],e[1]);return-t.context.evaluateExpression(r)}},{pattern:[O("numlit")],evaluate:function(t){return+t.sourceString}},{pattern:["rand","(",")"],evaluate:function(){return Math.random()}}],Integer:[{pattern:["round",O("Number")],evaluate:function(t){var e=ht(t.tokens,2),r=(e[0],e[1]),n=t.context;return Math.round(n.evaluateExpression(r))}},{pattern:[O("Iterable"),".","length"],evaluate:function(t){var e=ht(t.tokens,1)[0];return t.context.evaluateExpression(e).length}},{pattern:[O("Integer"),"+",O("Integer")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=ht(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)+o.evaluateExpression(n)}},{pattern:[O("Integer"),"-",O("Integer")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=ht(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)-o.evaluateExpression(n)}},{pattern:[O("Integer"),"*",O("Integer")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=ht(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)*o.evaluateExpression(n)}},{pattern:[O("Integer"),"/",O("Integer")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=ht(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)/o.evaluateExpression(n)}},{pattern:[O("Integer"),"^",O("Integer")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=ht(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return Math.pow(o.evaluateExpression(r),o.evaluateExpression(n))}},{pattern:["-",O("Integer")],evaluate:function(t){var e=ht(t.tokens,2),r=(e[0],e[1]);return-t.context.evaluateExpression(r)}},{pattern:[w(O("digit"),1)],spaces:"specify",evaluate:function(t){return+t.sourceString}}],numlit:[{pattern:[w(O("digit"),1),x(".",x(O("endbit")))],spaces:"specify"},{pattern:[w(O("digit")),".",w(O("digit"),1),x(O("endbit"))],spaces:"specify"}],endbit:[{pattern:[g("e","E"),w(O("digit"),1)]}]};function dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return gt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const wt={Object:[{pattern:["(",{thisType:!0},")"],evaluate:function(t){var e=dt(t.tokens,2),r=(e[0],e[1]);return t.context.evaluateExpression(r)}},{pattern:[O("Dictionary",{thisType:!0}),".",O("varName")],evaluate:function(t){var e=dt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)[o.evaluateExpression(n)]}},{pattern:[O("Dictionary",{thisType:!0}),"[",g(O("String"),O("Number")),"]"],evaluate:function(t){var e=dt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)[o.evaluateExpression(n)]}},{pattern:[O("Iterable",{thisType:!0}),"[",O("Integer"),"]"],evaluate:function(t){var e=dt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r).getIndex(o.evaluateExpression(n))}},{pattern:[O("Function",("A",{genericType:"A"}),{thisType:!0}),O("Object")],genericTypes:{A:"Object"},evaluate:function(t){var e=dt(t.tokens,2),r=e[0],n=e[1],o=t.context;return o.evaluateExpression(r).call(o.evaluateExpression(n))}}]};var xt=["pattern"];function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function Ot(t){return function(t){if(Array.isArray(t))return jt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return jt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Et(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function kt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(r),!0).forEach((function(e){At(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function At(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==St(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===St(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var It=function t(e,r){return e.map((function(e){if(e.metaType){switch(e.metaType){case"or":return kt(kt({},e),{},{patterns:e.patterns.map((function(e){return t(e,r)}))});case"multi":case"subcontext":return kt(kt({},e),{},{pattern:t(e.pattern,r)});case"anychar":return e}throw"Invalid metatype: ".concat(e.metaType)}return e.thisType?O(r):e}))},Pt=function(t,e){var r=t.pattern;return kt(kt({},function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,xt)),{},{pattern:It(r,e)})},Tt=function(t,e){var r=[];return e.generics.genericSubtypeRules[t]&&r.push(e.generics.genericSubtypeRules[t][0]),r.push.apply(r,Ot(e.rules[t].map((function(e){return Pt(e,t)})))),e.generics.genericParents[t]&&r.push.apply(r,Ot(e.generics.genericParents[t].flatMap((function(r){return e.rules[r].map((function(e){return Pt(e,t)}))})))),r};function Nt(t){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nt(t)}var Lt=function(t){return"object"!==Nt(t)},Dt=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(e?G("[","magenta"):"")+t.map((function(t){return _t(t,r)})).join("")+(e?G("]","magenta"):"")},_t=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Array.isArray(t))return Dt(t,!1,e);if(t.type)return G("{".concat(t.type,"}"),"red");if(t.metaType)switch(t.metaType){case"or":return G("(","green")+"".concat(t.patterns.map((function(t){return Dt(t,!1,e)})).join(G(" | ","green")))+G(")","green");case"multi":if("space"===t.pattern[0].type&&e)return" ";var r=Dt(t.pattern,!1,e);if(t.max>=Number.MAX_SAFE_INTEGER/2)return 0===t.min?r+G("*","yellow"):1===t.min?r+G("+","yellow"):r+G("{".concat(t.min,"}"),"yellow");if(1===t.max){if(t.ignoreWeirdMulti)return r;if(0!==t.min)throw"Weird multi metatype: min=".concat(t.min," max=1");return r+G("?","yellow")}return r+G("{".concat(t.min,", ").concat(t.max,"}"),"yellow");case"anychar":return G("[".concat(Mt(t.tokenDict),"]"),"blue");case"subcontext":return G("<","red")+Dt(t.pattern,!1,e)+G(">","red");default:throw"Not implemented: Stringify metatype ".concat(t.metaType)}return t},Mt=function(t){return t.whitelist?Object.keys(t.whitelist).join(""):"NOT ".concat(Object.keys(t.blacklist).join(""))};function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Rt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ft(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rt(Object(r),!0).forEach((function(e){Gt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Gt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Ct(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ct(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ht=function t(e,r){return e.whitelist?r.whitelist?{whitelist:Ft(Ft({},e.whitelist),r.whitelist)}:{blacklist:s(r.blacklist,e.whitelist)}:r.whitelist?t(r,e):{blacklist:l(e.blacklist,r.blacklist)}},$t=function(t,e){return Ht(t,{whitelist:i(e.split(""))})},Ut=function(t,e){return t.whitelist?e.split("").every((function(e){return t.whitelist[e]})):e.split("").every((function(e){return!t.blacklist[e]}))};function Bt(t){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bt(t)}function Wt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(t,e)||Jt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Yt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xt(Object(r),!0).forEach((function(e){qt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Bt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==Bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Bt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vt(t){return function(t){if(Array.isArray(t))return Kt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Jt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Jt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function Jt(t,e){if(t){if("string"==typeof t)return Kt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kt(t,e):void 0}}function Kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Qt=W((function(t,e,r,n){if("string"!=typeof t)throw"Complex types are not allowed quite yet! But also this could just be an error with the typeType() or genericType() stuff cuz that shouldnt ever get here";if(!n.rules[t])return{error:"Invalid type: ".concat(t)};var o=ee(t,e,n);if(o.error)return o;var a,i=zt(Tt(t,n));try{for(i.s();!(a=i.n()).done;){var u=a.value,c=te(u.pattern,e,u,r,n);if(!c.error){var l={type:t,tokens:c,evaluate:u.evaluate,sourceString:e,lineNumber:r};return u.onParse&&u.onParse(l,n),l}}}catch(t){i.e(t)}finally{i.f()}return{error:'"'.concat(e,'" did not match any pattern of type: ').concat(t,"!")}}),"parseExpressionAsType",[!0,!0],_t),Zt=function(t,e,r,n){switch(t.metaType){case"or":var o,a=zt(t.patterns);try{for(a.s();!(o=a.n()).done;){var i=o.value,u=te(i,e,void 0,r,n);if(!u.error)return u}}catch(t){a.e(t)}finally{a.f()}return{error:'"'.concat(e,'" did not match any pattern in list: ').concat(Dt([t]),"!")};case"multi":if(t.min<=0&&""===e)return[];if(t.max<=0&&""!==e)return{error:"Maximum length reached"};var c=te([].concat(Vt(t.pattern),[Yt(Yt({},t),{},{min:Math.max(t.min-1,0),max:Math.max(t.max-1,0)})]),e,void 0,r,n);return c.error?c:oe(t.pattern,c);case"anychar":return Ut(t.tokenDict,e)?e:{error:'There do not exist any possible matches of "'.concat(e,'" on pattern ').concat(Dt([t]),"!")};case"subcontext":return te(t.pattern,e,void 0,r,t.getSubcontext())}return{error:"Invalid metaType: ".concat(t.metaType)}},te=W((function(t,e,r,n,o){var a=ne(t,e,o);if(0===a.length)return{error:'There do not exist any possible matches of "'.concat(e,'" on pattern ').concat(Dt(t),"!")};r&&r.associativityReverseSearchOrder&&a.reverse();var i,u=zt(a);try{t:for(u.s();!(i=u.n()).done;){var c,l=i.value,s=[],f=zt(t.entries());try{for(f.s();!(c=f.n()).done;){var p=Wt(c.value,2),y=p[0],v=p[1],h=e.slice(l[y-1]||0,l[y]);if(Lt(v)){if(v!==h)continue t;s.push(v)}else if(v.metaType){var m=Zt(v,h,n,o);if(m.error)continue t;s.push(m)}else{var b=Qt(v.type,h,n,o);if(b.error)continue t;s.push(b)}}}catch(t){f.e(t)}finally{f.f()}return s}}catch(t){u.e(t)}finally{u.f()}return{error:'All possible matches of "'.concat(e,'" on pattern ').concat(Dt(t)," failed.")}}),"parseExpressionAsPattern",[Dt,!0],Dt),ee=function(t,e,r){for(var n in r.heuristics.typeHeuristics){var o=r.heuristics.typeHeuristics[n](t,e);if(o.error)return o}return{}},re=function t(e,r,n){if("anychar"===e.metaType)return 1===r.length&&Ut(e.tokenDict,r)?{}:{error:'There do not exist any possible matches of "'.concat(r,'" on pattern ').concat(Dt([e]),"!")};if("subcontext"===e.metaType)return t(Yt(Yt({},e),{},{metaType:"multi",min:1,max:1,ignoreWeirdMulti:!0}),r,e.getSubcontext());for(var o in n.heuristics.metaTypeHeuristics){var a=n.heuristics.metaTypeHeuristics[o](e,r);if(a.error)return a}return{}},ne=function t(e,r,n){if(0===e.length)return 0===r.length?[[]]:[];if(r.length<function(t,e){return e.heuristics.patternHeuristics.minLength(t)}(e,n))return[];var o=e[0];if(Lt(o))return r.slice(0,o.length)!==o?[]:t(e.slice(1),r.slice(o.length),n).map((function(t){return[o.length].concat(Vt(t.map((function(t){return t+o.length}))))}));for(var a=[],i=function(i){if(o.type){if(ee(o.type,r.slice(0,i),n).error)return"continue"}else if(re(o,r.slice(0,i),n).error)return"continue";a.push.apply(a,Vt(t(e.slice(1),r.slice(i),n).map((function(t){return[i].concat(Vt(t.map((function(t){return t+i}))))}))))},u=0;u<=r.length;u++)i(u);return a},oe=function t(e,r){if(0===r.length)return[];if(r.length===e.length)return r.map((function(t){return t}));var n=r.slice(0,r.length-1),o=t(e,r[r.length-1]);return 0===o.length?n.map((function(t){return[t]})):e.map((function(t,e){return[n[e]].concat(Vt(o[e]))}))};function ae(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ie(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function ie(t,e){if(t){if("string"==typeof t)return ue(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ue(t,e):void 0}}function ue(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ce={Object:["Function","Integer","Number","String","Boolean","DiscreteRange","List","Iterable","Dictionary"]};const le={genericSubtypeRules:C(function(t){for(var e={},r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];e[o]=[{pattern:[g.apply(void 0,(a=t[o].map((function(t){return O(t)})),function(t){if(Array.isArray(t))return ue(t)}(a)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(a)||ie(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))]}]}var a;return e}(ce)),genericParents:function(t){for(var e={},r=0,n=Object.keys(t);r<n.length;r++){var o,a=n[r],i=ae(t[a]);try{for(i.s();!(o=i.n()).done;){var u=o.value;e[u]?e[u].push(a):e[u]=[a]}}catch(t){i.e(t)}finally{i.f()}}return e}(ce)};function se(t){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},se(t)}function fe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fe(Object(r),!0).forEach((function(e){ye(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ye(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==se(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===se(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ve(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return he(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?he(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function he(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var me=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;return void 0!==r[t]?r[t]:e[t]?(r[t]=Number.MAX_SAFE_INTEGER,r[t]):(e[t]=!0,r[t]=be(Tt(t,n).map((function(t){return t.pattern})),e,r,n),r[t])},be=function(t,e,r,n){var o,a=Number.MAX_SAFE_INTEGER,i=ve(t);try{for(i.s();!(o=i.n()).done;){var u=o.value;if(0===(a=Math.min(a,de(u,e,r,n))))break}}catch(t){i.e(t)}finally{i.f()}return a},de=function t(e,r,n,o){var a,i=0,u=ve(e);try{for(u.s();!(a=u.n()).done;){var c=a.value;if(Lt(c))i+=c.length;else{if(c.metaType)switch(c.metaType){case"or":i+=be(c.patterns,r,n,o);break;case"multi":if(0===c.min)continue;i+=t(c.pattern,r,n,o)*c.min;break;case"anychar":i+=1;continue;case"subcontext":i+=ge(c,r,n,o)}else i+=me(c.type,pe({},r),n,o);if(i>=Number.MAX_SAFE_INTEGER)return Number.MAX_SAFE_INTEGER}}}catch(t){u.e(t)}finally{u.f()}return i},ge=function(t,e,r,n){return n.parentContexts[t.subcontextId]?de(t.pattern,e,r,n):t.getSubcontext().heuristics.patternHeuristics.minLength(t.pattern)},we=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;return void 0!==r[t]?r[t]:e[t]?(r[t]=Number.MAX_SAFE_INTEGER,r[t]):(e[t]=!0,r[t]=xe(Tt(t,n).map((function(t){return t.pattern})),e,r,n),r[t])},xe=function(t,e,r,n){var o,a=0,i=ve(t);try{for(i.s();!(o=i.n()).done;){var u=o.value;if((a=Math.max(a,Se(u,e,r,n)))>=Number.MAX_SAFE_INTEGER)break}}catch(t){i.e(t)}finally{i.f()}return a},Se=function t(e,r,n,o){var a,i=0,u=ve(e);try{for(u.s();!(a=u.n()).done;){var c=a.value;if(Lt(c))i+=c.length;else{if(c.metaType)switch(c.metaType){case"or":i+=xe(c.patterns,r,n,o);break;case"multi":if(0===c.max){I("You have a multi token with a max length of 0, this should probably never happen.");continue}i+=t(c.pattern,r,n,o)*c.max;break;case"anychar":i+=1;continue;case"subcontext":i+=Oe(c,r,n,o)}else i+=we(c.type,pe({},r),n,o);if(i>=Number.MAX_SAFE_INTEGER)return Number.MAX_SAFE_INTEGER}}}catch(t){u.e(t)}finally{u.f()}return i},Oe=function(t,e,r,n){return n.parentContexts[t.subcontextId]?Se(t.pattern,e,r,n):t.getSubcontext().heuristics.patternHeuristics.maxLength(t.pattern)},je=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;return void 0!==r[t]?r[t]:e[t]?(r[t]={whitelist:{}},r[t]):(e[t]=!0,r[t]=Ee(Tt(t,n).map((function(t){return t.pattern})),e,r,n),r[t])},Ee=function(t,e,r,n){var o,a={whitelist:{}},i=ve(t);try{for(i.s();!(o=i.n()).done;){var u=o.value;a=Ht(a,ke(u,e,r,n))}}catch(t){i.e(t)}finally{i.f()}return a},ke=function t(e,r,n,o){var a,i={whitelist:{}},u=ve(e);try{for(u.s();!(a=u.n()).done;){var c=a.value;if(Lt(c))i=$t(i,c);else if(c.metaType)switch(c.metaType){case"or":i=Ht(i,Ee(c.patterns,r,n,o));break;case"multi":i=Ht(i,t(c.pattern,r,n,o));break;case"anychar":i=Ht(i,c.tokenDict);break;case"subcontext":i=Ht(i,Ae(c,r,n,o))}else i=Ht(i,je(c.type,pe({},r),n,o))}}catch(t){u.e(t)}finally{u.f()}return i},Ae=function(t,e,r,n){return n.parentContexts[t.subcontextId]?ke(t.pattern,e,r,n):ke(t.pattern,{},{},t.getSubcontext())},Ie=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return void 0!==r[t]?r[t]:e[t]?(r[t]={whitelist:{}},r[t]):(e[t]=!0,r[t]=Pe(Tt(t,n).map((function(t){return t.pattern})),e,r,n,o),r[t])},Pe=function(t,e,r,n,o){var a,i={whitelist:{}},u=ve(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;i=Ht(i,Te(c,e,r,n,o))}}catch(t){u.e(t)}finally{u.f()}return i},Te=function t(e,r,n,o,a){var i,u={whitelist:{}},c=ve(e);try{for(c.s();!(i=c.n()).done;){var l=i.value;if(Lt(l)){if(l.length)return $t(u,l[0])}else if(l.metaType)switch(l.metaType){case"or":if(u=Ht(u,Pe(l.patterns,r,n,o,a)),be(l.patterns,{},{},o))return u;break;case"multi":if(u=Ht(u,t(l.pattern,r,n,o,a)),l.min&&de(l.pattern,{},{},o))return u;break;case"anychar":return Ht(u,l.tokenDict);case"subcontext":if(u=Ht(u,Ne(l,r,n,o,a)),ge(l,{},{},o))return u}else if(u=Ht(u,Ie(l.type,pe({},r),n,o,a)),a.minLength[l.type])return u}}catch(t){c.e(t)}finally{c.f()}return u},Ne=function(t,e,r,n,o){return n.parentContexts[t.subcontextId]?Te(t.pattern,e,r,n,o):Te(t.pattern,{},{},t.getSubcontext(),Re(t.getSubcontext().heuristics))},Le=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return void 0!==r[t]?r[t]:e[t]?(r[t]={whitelist:{}},r[t]):(e[t]=!0,r[t]=De(Tt(t,n).map((function(t){return t.pattern})),e,r,n,o),r[t])},De=function(t,e,r,n,o){var a,i={whitelist:{}},u=ve(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;i=Ht(i,_e(c,e,r,n,o))}}catch(t){u.e(t)}finally{u.f()}return i},_e=function t(e,r,n,o,a){for(var i={whitelist:{}},u=e.length-1;u>=0;u--){var c=e[u];if(Lt(c)){if(c.length)return $t(i,c[c.length-1])}else if(c.metaType)switch(c.metaType){case"or":if(i=Ht(i,De(c.patterns,r,n,o,a)),be(c.patterns,{},{},o))return i;break;case"multi":if(i=Ht(i,t(c.pattern,r,n,o,a)),c.min&&de(c.pattern,{},{},o))return i;break;case"anychar":return Ht(i,c.tokenDict);case"subcontext":if(i=Ht(i,Me(c,r,n,o,a)),ge(c,{},{},o))return i}else if(i=Ht(i,Le(c.type,pe({},r),n,o,a)),a.minLength[c.type])return i}return i},Me=function(t,e,r,n,o){return n.parentContexts[t.subcontextId]?_e(t.pattern,e,r,n,o):_e(t.pattern,{},{},t.getSubcontext(),Re(t.getSubcontext().heuristics))};const Ce=function(t,e,r){var n={},o={types:{},typeHeuristics:{},metaTypeHeuristics:{},patternHeuristics:{}},a={rules:t,generics:e,parentContexts:r};for(var i in n.minLength=function(t){var e={};for(var r in t.rules)e[r]=me(r,void 0,void 0,t),e[r]>=Number.MAX_SAFE_INTEGER&&I('Warning: Type "'.concat(r,'" has a minimum length of ').concat(e[r]," (Probably an unclosed rule loop)"));return e}(a),o.typeHeuristics.minLength=function(t,e){return e.length<o.types[t].minLength&&{error:'"'.concat(e,'" is shorter than the minimum possible length (').concat(o.types[t].minLength,") for type: ").concat(t,"!")}},o.metaTypeHeuristics.minLength=function(t,e){var r;switch(t.metaType){case"or":r=be(t.patterns,{},n.minLength,a);break;case"multi":r=t.min*de(t.pattern,{},n.minLength,a);break;default:return{error:"Invalid meta-type: ".concat(t.metaType)}}return!(e.length<r)||{error:'"'.concat(e,'" is shorter than the minimum possible length (').concat(r,") for meta-type: ").concat(Dt([t]),'!"')}},o.patternHeuristics.minLength=function(t){return de(t,{},n.minLength,a)},n.maxLength=function(t){var e={};for(var r in t.rules)e[r]=we(r,void 0,void 0,t);return e}(a),o.typeHeuristics.maxLength=function(t,e){return e.length>o.types[t].maxLength&&{error:'"'.concat(e,'" is longer than the maximum possible length (').concat(o.types[t].maxLength,") for type: ").concat(t,"!")}},o.metaTypeHeuristics.maxLength=function(t,e){var r;switch(t.metaType){case"or":r=xe(t.patterns,{},n.maxLength,a);break;case"multi":r=t.max*Se(t.pattern,{},n.maxLength,a);break;default:return{error:"Invalid meta-type: ".concat(t.metaType)}}return!(e.length>r)||{error:'"'.concat(e,'" is longer than the maximum possible length (').concat(r,") for meta-type: ").concat(Dt([t]),"!")}},o.patternHeuristics.maxLength=function(t){return Se(t,{},n.maxLength,a)},n.dict=function(t){var e={};for(var r in t.rules)e[r]=je(r,void 0,void 0,t);return e}(a),o.typeHeuristics.dict=function(t,e){var r,n=ve(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(!Ut(o.types[t].dict,a))return{error:"'".concat(a,"' is not in the set of allowed tokens for type: ").concat(t,"!")}}}catch(t){n.e(t)}finally{n.f()}return!0},o.metaTypeHeuristics.dict=function(t,e){if(!e.length)return!0;var r;switch(t.metaType){case"or":r=Ee(t.patterns,{},n.dict,a);break;case"multi":r=ke(t.pattern,{},n.dict,a);break;default:return{error:"Invalid meta-type: ".concat(t.metaType)}}var o,i=ve(e);try{for(i.s();!(o=i.n()).done;){var u=o.value;if(!Ut(r,u))return{error:"'".concat(u,"' is not in the set of allowed tokens for meta-type: ").concat(Dt([t]),"!")}}}catch(t){i.e(t)}finally{i.f()}return!0},n.startDict=function(t,e){var r={};for(var n in t.rules)r[n]=Ie(n,void 0,void 0,t,e);return r}(a,n),o.typeHeuristics.startDict=function(t,e){return!Ut(o.types[t].startDict,e[0])&&{error:"'".concat(e[0],"' is not in the set of start tokens for type: ").concat(t,"!")}},o.metaTypeHeuristics.startDict=function(t,e){if(!e.length)return!0;var r;switch(t.metaType){case"or":r=Pe(t.patterns,{},n.startDict,a,n);break;case"multi":r=Te(t.pattern,{},n.startDict,a,n);break;default:return{error:"Invalid meta-type: ".concat(t.metaType)}}return!Ut(r,e[0])&&{error:"'".concat(e[0],"' is not in the set of start tokens for meta-type: ").concat(Dt([t]),"!")}},n.endDict=function(t,e){var r={};for(var n in t.rules)r[n]=Le(n,void 0,void 0,t,e);return r}(a,n),o.typeHeuristics.endDict=function(t,e){return!Ut(o.types[t].endDict,e[e.length-1])&&{error:"'".concat(e[e.length-1],"' is not in the set of end tokens for type: ").concat(t,"!")}},o.metaTypeHeuristics.endDict=function(t,e){if(!e.length)return!0;var r;switch(t.metaType){case"or":r=De(t.patterns,{},n.endDict,a,n);break;case"multi":r=_e(t.pattern,{},n.endDict,a,n);break;default:return{error:"Invalid meta-type: ".concat(t.metaType)}}return!Ut(r,e[e.length-1])&&{error:"'".concat(e[e.length-1],"' is not in the set of end tokens for meta-type: ").concat(Dt([t]),'!"')}},t)for(var u in o.types[i]={},o.typeHeuristics)o.types[i][u]=n[u][i];return o};var Re=function(t){var e={};for(var r in t.types)e[r]=t.types[r].minLength;return{minLength:e}};function Fe(t){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fe(t)}function Ge(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function He(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $e(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?He(Object(r),!0).forEach((function(e){Ue(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ue(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Fe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==Fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Fe(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Be=function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=$e($e({},function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{rules:U(t),generics:U(e),heuristics:Ce(t,e,r),parentContexts:U(r)}}(function(t,e){var r=Object.keys(t).reduce((function(e,r){return v(v({},e),{},h({},r,f(t[r])))}),{});for(var n in e){var o;n in r?(o=r[n]).push.apply(o,f(e[n])):r[n]=e[n]}return r}(nr,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),le,t)),{},{vars:[],setVariable:function(t,r,n){var o;null!==(o=e.vars[t])&&void 0!==o&&o.type&&e.vars[t].type!==r&&(I("Warning: Changing type of variable ".concat(t," (").concat(e.vars[t].type," -> ").concat(r,")")),e.rules[e.vars[t].type]=e.rules[e.vars[t].type].filter((function(e){var r=e.pattern;return 1!==r.length&&r[0]!==t})),delete e.vars[t]),void 0===e.vars[t]&&(e.rules[r].push({pattern:[t],evaluate:function(){return e.vars[t].value}}),e.heuristics=Ce(e.rules,e.generics,e.parentContexts)),e.vars[t]={value:n,type:r}}});return e.evaluateExpression=function(t){return function(e,r){if(!e.evaluate){if(e.length)return t.evaluateExpression(e[0]);throw"not sure what happened"}if(["Statement","Instantiator"].includes(e.type))switch(t.ranIfStatement){case!0:t.ranIfStatement=1;break;case!1:t.ranIfStatement=0;break;default:t.ranIfStatement=void 0}var n=0,o=e.unparsedStatements&&{hasNext:function(){return e.unparsedStatements[n]},next:function(){n++,r(e.unparsedStatements[n-1],t)},iterateToEnd:function(){for(;o.hasNext();)o.next()},restart:function(){return n=0}};return e.evaluate({tokens:e.tokens,sourceString:e.sourceString,lineNumber:e.lineNumber,childIterator:o,context:t})}}(e),e},We=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Be(),n=e.instantiatorStatement,o=e.statements,a=e.lineNumber,i=e.line,u=e.parsedNode;if(o){if(n){var c=u||Qt("Instantiator",n.line,a,r);if(c.error)throw $(c.error,a,"Parsing Error");return e.parsedNode=c,void r.evaluateExpression($e($e({},c),{},{unparsedStatements:o,lineNumber:a}),t)}Xe(o,r)}else{var l=u||Qt("Statement",i,a,r);if(l.error)throw $(l.error,a,"Parsing Error");e.parsedNode=l,r.evaluateExpression($e($e({},l),{},{lineNumber:a}))}},Xe=function(t,e){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Ge(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ge(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(e.breakingLoop||e.continuingLoop)break;We(o,e)}}catch(t){n.e(t)}finally{n.f()}};function Ye(t){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(t)}function qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const Ve={Function:[{pattern:["fn",":",(ze=[O("Object")],Je=function(t){return Be({Number:[{pattern:["$"],evaluate:function(t){return t.context.vars.$.value}}]},(e={},n=!0,(r=function(t){var e=function(t,e){if("object"!==Ye(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==Ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ye(e)?e:String(e)}(r=t))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e));var e,r,n},Ke={metaType:"subcontext",pattern:ze,subcontextId:++j,getSubcontext:function(){if(Ke.subcontext)return Ke.subcontext;var t=Je(Ke.subcontextId);return Ke.subcontext=t,Ke.subcontext}},Ke)],evaluate:function(t){var e,r,n=(e=t.tokens,r=3,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(e,r)||function(t,e){if(t){if("string"==typeof t)return qe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qe(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=(n[0],n[1],n[2]);return{asString:Qe(o),call:function(t){var e=Be();return e.setVariable("$",rt(t),t),e.evaluateExpression(o)}}}}]};var ze,Je,Ke,Qe=function(t){return"(Function)"};function Ze(t){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ze(t)}function tr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function er(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0).forEach((function(e){rr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Ze(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ze(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const nr=C(er(er(er(er(er(er(er(er(er({space:[{pattern:[" "]}],digit:[{pattern:[b("0123456789")]}]},J),et),at),it),vt),bt),wt),q),Ve));function or(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return ar(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ar(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const ir=function(t){var e,r,n=t.split(/\r\n|\n\r|\n|\r/g).map((function(t,e){return{lineNumber:e+1,line:t}})),o=function(t){var e,r=[],n=!1,o=or(t);try{for(o.s();!(e=o.n()).done;){for(var a=e.value,i=a.lineNumber,u=a.line,c="",l=u;l;){if(n){var s=l.search(/###/);if(-1===s)break;l=" ".concat(l.substring(s+3)),n=!1}var f=l.search(/#/);if(-1===f){c+=l;break}if(c+=l.substring(0,f),"###"!==u.substring(f,f+3))break;l=l.substring(f+3),n=!0}c.match(/^\s*$/)||r.push({lineNumber:i,line:c.replace(/\s+$/gm,"")})}}catch(t){o.e(t)}finally{o.f()}return r}(n),a={statements:[]},i=0,u=a,c=or(o);try{for(c.s();!(r=c.n()).done;){var l=r.value,s=l.lineNumber,f=l.line,p=f.match(/^\s*/g)[0].length;if(void 0===e)e=p,u.indent=e;else if(p<e)throw $("Line indented deeper than start of file! (Line: ".concat(p,", File: ").concat(e,")"),s,"Preparsing Error");var y={lineNumber:s,line:f.substring(p)};if(p!==i){if(p>i){var v={instantiatorStatement:u.statements.splice(u.statements.length-1)[0],statements:[y],parent:u,indent:p};u.statements.push(v),u=v}else for(;p!==u.indent;){if(!u.parent)throw $("Did not indent back to any parent indentation! (Line: ".concat(p,")"),s,"Preparsing Error");var h=u.parent;delete u.parent,delete u.indent,(u=h).statements.push(y)}i=p}else u.statements.push(y)}}catch(t){c.e(t)}finally{c.f()}for(;u!==a;){var m=u.parent;delete u.parent,delete u.indent,u=m}return delete u.indent,a};function ur(t){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ur(t)}function cr(){cr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),u=new E(o||[]);return n(i,"_invoke",{value:x(t,r,u)}),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function y(){}function v(){}var h={};c(h,a,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(k([])));b&&b!==e&&r.call(b,a)&&(h=b);var d=v.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,a,i,u){var c=s(t[n],t,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==ur(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,i,u)}),(function(t){o("throw",t,i,u)})):e.resolve(f).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,u)}))}u(c.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var u=S(i,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function k(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return y.prototype=v,n(d,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:y,configurable:!0}),y.displayName=c(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,u,"GeneratorFunction")),t.prototype=Object.create(d),t},t.awrap=function(t){return{__await:t}},g(w.prototype),c(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},g(d),c(d,u,"Generator"),c(d,a,(function(){return this})),c(d,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function lr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function sr(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var fr=function(){var t,e=(t=cr().mark((function t(e){var r,n;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k.exitOnError=!1,nr.Statement.push({pattern:["exit"],evaluate:function(){return process.exit(0)}}),nr.Statement.push({pattern:nr.Statement[0].pattern.slice(2),evaluate:function(t){var e,r,n=(e=t.tokens,r=1,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(e,r)||function(t,e){if(t){if("string"==typeof t)return lr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lr(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],o=t.context;K(o.evaluateExpression(n)),A("\n")}}),r=Be(),A("Welcome to Cuttlefish v2.0.a\n");case 5:return t.next=8,e();case 8:n=t.sent;try{We(ir(n),r)}catch(t){console.error(t)}t.next=5;break;case 12:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){sr(a,n,o,i,u,"next",t)}function u(t){sr(a,n,o,i,u,"throw",t)}i(void 0)}))});return function(t){return e.apply(this,arguments)}}();function pr(t){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pr(t)}function yr(){yr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),u=new E(o||[]);return n(i,"_invoke",{value:x(t,r,u)}),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function y(){}function v(){}var h={};c(h,a,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(k([])));b&&b!==e&&r.call(b,a)&&(h=b);var d=v.prototype=p.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,a,i,u){var c=s(t[n],t,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==pr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,i,u)}),(function(t){o("throw",t,i,u)})):e.resolve(f).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,u)}))}u(c.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var u=S(i,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function k(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return y.prototype=v,n(d,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:y,configurable:!0}),y.displayName=c(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,u,"GeneratorFunction")),t.prototype=Object.create(d),t},t.awrap=function(t){return{__await:t}},g(w.prototype),c(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},g(d),c(d,u,"Generator"),c(d,a,(function(){return this})),c(d,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function vr(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function hr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){vr(a,n,o,i,u,"next",t)}function u(t){vr(a,n,o,i,u,"throw",t)}i(void 0)}))}}var mr=document.getElementById("terminal"),br=document.getElementById("cursor");k.consoleWrite=function(t){return mr.value+=t},k.consoleError=function(t){return mr.value+=t+"\n"},k.colors=!1;var dr=function(t){var e=Math.max(mr.selectionStart,t),r=Math.floor((window.innerWidth-4)/8),n=(3+e-t-1)%r+1;n<0&&(n+=r-1);var o=mr.value.slice(0,e).split("\n").reduce((function(t,e){return t+Math.ceil(e.length/r)}),0)-1;br.style.left="".concat(2+8*n,"px"),br.style.top="".concat(2+15.5*o-mr.scrollTop,"px")};fr(hr(yr().mark((function t(){var e,r;return yr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return mr.value+="$> ",e=mr.value.length,r=new Promise((function(t){window.onkeydown=function(r){if("Enter"===r.key)return mr.value+="\n",r.preventDefault(),t(mr.value.slice(e,-1));"Backspace"===r.key?mr.selectionStart===e?r.preventDefault():mr.selectionStart<e?mr.selectionStart=e:mr.selectionStart===mr.selectionEnd&&mr.selectionStart--:"ArrowLeft"===r.key?mr.selectionStart===e&&r.preventDefault():("ArrowUp"===r.key||"ArrowDown"===r.key)&&r.preventDefault()},document.onselectionchange=function(){return dr(e)},window.onresize=function(){return dr(e)},mr.onscroll=function(){return dr(e)}})),mr.scrollTo(0,mr.scrollHeight),t.next=6,r;case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)}))))})();