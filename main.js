/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var a=function(t){return function(t){return"object"===i(t)&&!Array.isArray(t)}(t)?t:t.reduce((function(t,e){return n(n({},t),{},o({},e,!0))}),{})},u=function(e){return function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e.apply(void 0,t(n.map(a)))}},c=u((function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return 0===n.length?e:c.apply(void 0,[a([].concat(t(Object.keys(e)),t(Object.keys(n[0]))))].concat(t(n.slice(1))))})),l=u((function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return 0===n.length?e:l.apply(void 0,[a(Object.keys(e).filter((function(t){return n[0][t]})))].concat(t(n.slice(1))))})),s=u((function(t,e){return a(Object.keys(t).filter((function(t){return!e[t]})))}));function f(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==b(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===b(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}u((function(t,e){return Object.keys(l(t,e)).length===Object.keys(t).length}));var h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof t||!t.length)throw"ANYCHAR(whitelist): whitelist must be a string of characters to include!";return{metaType:"anychar",tokenDict:{whitelist:a(e?t.split("").flatMap((function(t){return[t.toLowerCase(),t.toUpperCase()]})):t.split(""))}}},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!=typeof t)throw"NOTCHAR(blacklist): blacklist must be a string of characters to exclude!";return{metaType:"anychar",tokenDict:{blacklist:a(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t.split("").flatMap((function(t){return[t.toLowerCase(),t.toUpperCase()]})):t.split(""))}}},g=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return{metaType:"or",patterns:e.map((function(t){return S(t)?t:[t]}))}},w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return{metaType:"multi",pattern:S(t)?t:[t],min:e,max:r}},x=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return w(e,0,1)},S=function(t){return"object"===b(t)&&void 0!==t.length},O=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return{type:t,subtypes:r}},j=0,E=function(t,e){return function(){if(k.log)return t[e].bind(t).apply(void 0,arguments)}},k={exitOnError:!0,log:!0,colors:!0,debug:!1,inspect:console.log,consoleWrite:"undefined"!=typeof process?E(process.stdout,"write"):function(){},consoleLog:E(console,"log"),consoleWarn:E(console,"warn"),consoleError:E(console,"error")},A=function(){return k.consoleWrite.apply(k,arguments)},P=function(){return k.consoleWarn.apply(k,arguments)};function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}var T=["tokens"],N=["tokens"];function L(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?L(Object(r),!0).forEach((function(e){M(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function M(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==I(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===I(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}const _=function(t){return Object.keys(t).forEach((function(e){t[e].forEach((function(t,r){var n=t.spaces,o=void 0===n?"optional":n,i=t.evaluate,a=void 0===i?function(t){var n=t.tokens,o=t.context;return n.length>1&&P("Warning: Evaluating rule ".concat(r,' in type "').concat(e,'" with default evaluation, ignoring all tokens aside from the first.')),o.evaluateExpression(n[0])}:i,u=t.onParse;switch(t.evaluate=a,o){default:P("Warning: Rule ".concat(r,' in type "').concat(e,'" has invalid spaces configuration: "').concat(o,'", defaulting to default (optional).'));case"required":case"optional":t.pattern=t.pattern.flatMap((function(e,r){return r===t.pattern.length-1?e:[e,w(O("space"),"required"===o?1:0)]})),u&&(t.onParse=function(t){var e=t.tokens,r=V(t,T);return u(D({tokens:e.filter((function(t,e){return e%2==0}))},r))}),t.evaluate=function(t){var e=t.tokens,r=V(t,N);return a(D({tokens:e.filter((function(t,e){return e%2==0}))},r))};case"none":}}))})),t};function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var G=function(t,e){return k.colors?t[e]:t},$=["Error","Parsing Error","Preparsing Error","Runtime Exception"],F=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Error";$.includes(r)||P("Warning: ".concat(r," is not an allowed error type."));var n="".concat(r,": ").concat(e?"Line ".concat(e,": "):"").concat(t);if(function(){k.consoleError.apply(k,arguments)}(n),!k.exitOnError)throw n;process.exit(-1)},U=function t(e){if("object"!==C(e))return e;if(void 0!==e.length)return e.map(t);var r={};for(var n in e)r[n]=t(e[n]);return r},B=0,W=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"f",r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return function(){for(var i,a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];if(!k.debug||!o)return t.apply(void 0,u);var l,s=Array(B).fill("  ").join("");(i=console).log.apply(i,["".concat(s).concat(e)].concat(function(t){if(Array.isArray(t))return R(t)}(l=u.map((function(t,e){return r?r[e]?"function"==typeof r[e]?r[e](t):t:null:t})).filter((function(t){return null!==t})))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(l)||function(t,e){if(t){if("string"==typeof t)return R(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(t,e):void 0}}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),["{"])),B++;var f=t.apply(void 0,u);return B--,console.log("".concat(s,"}"),"->",f.error?f.error:n?"function"==typeof n?n(f):n:f),f}},X=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return"function"==typeof t?t.apply(void 0,r):t};function Y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return q(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const z={String:[{pattern:['"',w(d('"')),'"'],spaces:"none",evaluate:function(t){var e=t.sourceString;return e.substring(1,e.length-1)}},{pattern:["'",w(d("'")),"'"],spaces:"none",evaluate:function(t){var e=t.sourceString;return e.substring(1,e.length-1)}},{pattern:[O("stringlike"),"++",O("stringlike")],evaluate:function(t){var e=Y(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return"".concat(o.evaluateExpression(r)).concat(o.evaluateExpression(n))}},{pattern:[O("stringlike"),"**",O("Integer")],evaluate:function(t){var e=Y(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context,i=o.evaluateExpression(n),a=o.evaluateExpression(r);return Array(i).fill(a).join("")}}],stringlike:[{pattern:[g(O("Number"),O("String"),O("Boolean"))]}]};function H(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return J(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const K={Statement:[{pattern:["print",O("printable")],evaluate:function(t){var e=H(t.tokens,2),r=(e[0],e[1]),n=t.context;Q(n.evaluateExpression(r)),A("\n")}},{pattern:[O("varName"),"=",O("Object")],evaluate:function(t){var e=H(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context,i=o.evaluateExpression(n);o.setVariable(r.sourceString,n.tokens[0][0].type,i)}},{pattern:["break"],evaluate:function(t){var e=t.lineNumber,r=t.context;if(!r.inLoop)throw F("Cannot use break outside of loop!",e,"Runtime Exception");r.breakingLoop=!0}},{pattern:["continue"],evaluate:function(t){var e=t.lineNumber,r=t.context;if(!r.inLoop)throw F("Cannot use continue outside of loop!",e,"Runtime Exception");r.breakingLoop=!0}},{pattern:["if",O("Boolean"),":",x(O("Statement"))],evaluate:function(t){var e=H(t.tokens,4),r=(e[0],e[1]),n=(e[2],e[3]),o=t.context,i=o.evaluateExpression(r);i&&o.evaluateExpression(n,o),o.ranIfStatement=i}},{pattern:["else",x(":"),O("Statement")],evaluate:function(t){var e=H(t.tokens,3),r=(e[0],e[1],e[2]),n=t.context,o=n.ranIfStatement;if(void 0===o)throw F("`else` statement must follow an `if` statement!",void 0,"Semantics Error");o||n.evaluateExpression(r,n)}}],varName:[{pattern:[w(h("abcdefghijklmnopqrstuvwxyz_",!0),1)]}],printable:[{pattern:[g(O("Function"),O("Iterable",O("printable")),O("stringlike"))]}]};var Q=function t(e){if(e.hasNext){e.restart();var r=e.hasNext()?" ":"";for(A("[".concat(r));e.hasNext();)t(e.next()),e.hasNext()&&A(", ");A("".concat(r,"]"))}else{if(!e.call)return A(e+"");A(e.asString)}};function Z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return tt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var et=function(t,e,r){var n=e.inLoop;for(e.inLoop=!0;t();){for(e.continuingLoop=!1,e.breakingLoop=!1,r.restart();r.hasNext()&&(r.next(),!e.continuingLoop&&!e.breakingLoop););if(e.breakingLoop)break}e.inLoop=n};const rt={Instantiator:[{pattern:["if",O("Boolean"),":"],evaluate:function(t){var e=Z(t.tokens,2),r=(e[0],e[1]),n=t.childIterator,o=t.context,i=o.evaluateExpression(r);i&&n.iterateToEnd(),o.ranIfStatement=i}},{pattern:["else",":"],evaluate:function(t){var e=t.context,r=t.childIterator,n=e.ranIfStatement;if(void 0===n)throw F("`else` statement must follow an `if` statement!",void 0,"Semantics Error");n||r.iterateToEnd()}},{pattern:["while",O("Boolean"),":"],evaluate:function(t){var e=Z(t.tokens,2),r=(e[0],e[1]),n=t.childIterator,o=t.context;et((function(){return o.evaluateExpression(r)}),o,n)}},{pattern:["repeat",x(O("Integer")),":"],evaluate:function(t){var e=Z(t.tokens,2),r=(e[0],e[1]),n=t.context,o=t.childIterator,i=0;et((function(){return i++,!r.length||i<n.evaluateExpression(r)}),n,o)}},{pattern:["for",O("Iterable"),x(":")],evaluate:function(t){var e=Z(t.tokens,2),r=(e[0],e[1]),n=t.context,o=t.childIterator,i=n.evaluateExpression(r).clone();et((function(){if(!i.hasNext())return!1;var t=i.next();return n.setVariable("$",nt(t),t),!0}),n,o)}}]};var nt=function(t){return"number"==typeof t?"Number":"string"==typeof t?"String":"boolean"==typeof t?"Boolean":Array.isArray(t)?"Iterable":"Object"};function ot(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return it(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?it(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const at={Boolean:[{pattern:[O("Boolean"),"or",O("Boolean")],evaluate:function(t){var e=ot(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)||o.evaluateExpression(n)}},{pattern:[O("Boolean"),"and",O("Boolean")],evaluate:function(t){var e=ot(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)&&o.evaluateExpression(n)}},{pattern:[O("Boolean"),"xor",O("Boolean")],evaluate:function(t){var e=ot(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return Boolean(o.evaluateExpression(r)^o.evaluateExpression(n))}},{pattern:["not",O("Boolean")],evaluate:function(t){var e=ot(t.tokens,2),r=(e[0],e[1]);return!t.context.evaluateExpression(r)}},{pattern:[O("Number"),"<",O("Number")],evaluate:function(t){var e=ot(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)<o.evaluateExpression(n)}},{pattern:[O("Number"),"<=",O("Number")],evaluate:function(t){var e=ot(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)<=o.evaluateExpression(n)}},{pattern:[O("Number"),">",O("Number")],evaluate:function(t){var e=ot(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)>o.evaluateExpression(n)}},{pattern:[O("Number"),">=",O("Number")],evaluate:function(t){var e=ot(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)>=o.evaluateExpression(n)}},{pattern:[O("Object"),"==",O("Object")],evaluate:function(t){var e=ot(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)===o.evaluateExpression(n)}},{pattern:[O("Object"),"in",O("Iterable")],evaluate:function(t){var e=ot(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context,i=o.evaluateExpression(n).clone(),a=o.evaluateExpression(r);if(i.itemInIterator)return i.itemInIterator(a);for(P("Warning: Iterator `in` operation running in iteration mode!");i.hasNext();)if(i.next()===a)return!0;return!1}},{pattern:[O("boollit")]}],boollit:[{pattern:["true"],evaluate:function(){return!0}},{pattern:["false"],evaluate:function(){return!1}}]},ut={Dictionary:[{pattern:[O("dictlit")]}],dictlit:[{pattern:["{","}"]}]};function ct(t){return function(t){if(Array.isArray(t))return ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||st(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||st(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(t,e){if(t){if("string"==typeof t)return ft(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ft(t,e):void 0}}function ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var pt=function t(e){var r=e.start,n=e.step,o=e.end,i=void 0===o?null:o,a=e.includeEnd,u=void 0!==a&&a,c=e.includeStart,l=void 0===c||c,s=r-n*l;return{hasNext:function(){return null===i||!((s+n-i)*n>=0)||s+n===i&&u},next:function(){return s+=n},restart:function(){return s=r-n*l},clone:function(){return t({start:r,step:n,end:i,includeEnd:u,includeStart:l})},getIndex:function(t){var e=r+n*!l+n*t;return null!==i&&(e-i)*n>=0?e===i&&u?e:void 0:e},length:null===i?null:Math.floor((i-r)/n),itemInIterator:function(t){return"number"==typeof t&&(t-r)%n==0&&(t-r)*n>=0&&(null===i||(t-i)*n<0||t===i&&u)}}},yt=function t(e){if(!Array.isArray(e))throw"Tried making list out of something that is NOT a list";var r=0,n={next:function(){if(!n.hasNext())throw"Tried calling iterator.next() when it do not have a next!";return r++,e[r-1]},hasNext:function(){return r<e.length},restart:function(){return r=0},clone:function(){return t(e)},getIndex:function(t){return e[t]},length:e.length,itemInIterator:function(t){return e.includes(t)}};return n},vt=function t(e,r){null===e.length&&P("Warning: Concatenating a to an infinite iterable (The second iterable will never run)");var n={usingIteratorA:e.hasNext(),next:function(){if(n.usingIteratorA){var t=e.next();return n.usingIteratorA=e.hasNext(),t}return r.next()},hasNext:function(){return n.usingIteratorA?e.hasNext():r.hasNext()},restart:function(){e.restart(),r.restart(),n.usingIteratorA=e.hasNext()},clone:function(){return t(e.clone(),r.clone())},getIndex:function(t){return null===e.length||t<e.length?e.getIndex(t):r.getIndex(t-e.length)},itemInIterator:function(t){return e.itemInIterator(t)||r.itemInIterator(t)}};return n};const mt={Iterable:[{pattern:[O("DiscreteRange")],evaluate:function(t){var e=lt(t.tokens,1)[0],r=t.context;return pt(r.evaluateExpression(e))}},{pattern:[O("List")],evaluate:function(t){var e=lt(t.tokens,1)[0],r=t.context;return yt(r.evaluateExpression(e))}},{pattern:[O("Iterable"),"++",O("Iterable")],evaluate:function(t){var e=lt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return vt(o.evaluateExpression(r).clone(),o.evaluateExpression(n).clone())}},{pattern:[O("Iterable"),"**",O("Integer")],evaluate:function(t){var e=lt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context,i=o.evaluateExpression(n);if(i<=0)return yt([]);for(var a=o.evaluateExpression(r),u=a.clone();--i>0;)u=vt(u.clone(),a.clone());return u}}],List:[{pattern:[O("List"),"++",O("List")],evaluate:function(t){var e=lt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return[].concat(ct(o.evaluateExpression(r)),ct(o.evaluateExpression(n)))}},{pattern:[O("List"),"**",O("Integer")],evaluate:function(t){var e=lt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context,i=o.evaluateExpression(n);if(i<=0)return[];for(var a=o.evaluateExpression(r),u=ct(a);--i>0;)u.push.apply(u,ct(a));return u}},{pattern:[O("listlit")]}],listlit:[{pattern:["[",x(O("commaSeparatedObjects")),"]"],evaluate:function(t){var e=lt(t.tokens,2),r=(e[0],e[1]),n=t.context;return 0===r.length?[]:n.evaluateExpression(r)}}],commaSeparatedObjects:[{pattern:[O("Object"),w([",",w(O("space")),O("Object"),w(O("space"))]),x(",")],evaluate:function(t){var e=lt(t.tokens,2),r=e[0],n=lt(e[1],3),o=(n[0],n[1],n[2]),i=t.context;return[i.evaluateExpression(r)].concat(ct(o?o.map(i.evaluateExpression):[]))}}],DiscreteRange:[{pattern:["[",O("Number"),"..","]"],evaluate:function(t){var e=lt(t.tokens,2),r=(e[0],e[1]);return{start:t.context.evaluateExpression(r),step:1}}},{pattern:["[",O("Number"),"..",O("Number"),"]"],evaluate:function(t){var e=lt(t.tokens,4),r=(e[0],e[1]),n=(e[2],e[3]),o=t.context;return{start:o.evaluateExpression(r),step:1,end:o.evaluateExpression(n)}}},{pattern:["[",O("Number"),"..",O("Number"),"..","]"],evaluate:function(t){var e=lt(t.tokens,4),r=(e[0],e[1]),n=(e[2],e[3]),o=t.context;return{start:o.evaluateExpression(r),step:o.evaluateExpression(n)}}},{pattern:["[",O("Number"),"..",O("Number"),"..",O("Number"),"]"],evaluate:function(t){var e=lt(t.tokens,6),r=(e[0],e[1]),n=(e[2],e[3]),o=(e[4],e[5]),i=t.context;return{start:i.evaluateExpression(r),step:i.evaluateExpression(n),end:i.evaluateExpression(o)}}}]};function bt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ht(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ht(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const dt={Number:[{pattern:[O("Integer")]},{pattern:[O("Number"),"+",O("Number")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=bt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)+o.evaluateExpression(n)}},{pattern:[O("Number"),"-",O("Number")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=bt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)-o.evaluateExpression(n)}},{pattern:[O("Number"),"*",O("Number")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=bt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)*o.evaluateExpression(n)}},{pattern:[O("Number"),"/",O("Number")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=bt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)/o.evaluateExpression(n)}},{pattern:[O("Number"),"^",O("Number")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=bt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return Math.pow(o.evaluateExpression(r),o.evaluateExpression(n))}},{pattern:["-",O("Number")],evaluate:function(t){var e=bt(t.tokens,2),r=(e[0],e[1]);return-t.context.evaluateExpression(r)}},{pattern:[O("numlit")],evaluate:function(t){return+t.sourceString}},{pattern:["rand","(",")"],evaluate:function(){return Math.random()}}],Integer:[{pattern:["round",O("Number")],evaluate:function(t){var e=bt(t.tokens,2),r=(e[0],e[1]),n=t.context;return Math.round(n.evaluateExpression(r))}},{pattern:[O("Iterable"),".","length"],evaluate:function(t){var e=bt(t.tokens,1)[0];return t.context.evaluateExpression(e).length}},{pattern:[O("Integer"),"+",O("Integer")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=bt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)+o.evaluateExpression(n)}},{pattern:[O("Integer"),"-",O("Integer")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=bt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)-o.evaluateExpression(n)}},{pattern:[O("Integer"),"*",O("Integer")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=bt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)*o.evaluateExpression(n)}},{pattern:[O("Integer"),"/",O("Integer")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=bt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)/o.evaluateExpression(n)}},{pattern:[O("Integer"),"^",O("Integer")],associativityReverseSearchOrder:!0,evaluate:function(t){var e=bt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return Math.pow(o.evaluateExpression(r),o.evaluateExpression(n))}},{pattern:["-",O("Integer")],evaluate:function(t){var e=bt(t.tokens,2),r=(e[0],e[1]);return-t.context.evaluateExpression(r)}},{pattern:[w(O("digit"),1)],spaces:"none",evaluate:function(t){return+t.sourceString}}],numlit:[{pattern:[w(O("digit"),1),x(".",x(O("endbit")))],spaces:"none"},{pattern:[w(O("digit")),".",w(O("digit"),1),x(O("endbit"))],spaces:"none"}],endbit:[{pattern:[g("e","E"),w(O("digit"),1)]}]};function gt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return wt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const xt={Object:[{pattern:["(",{thisType:!0},")"],evaluate:function(t){var e=gt(t.tokens,2),r=(e[0],e[1]);return t.context.evaluateExpression(r)}},{pattern:[O("Dictionary",{thisType:!0}),".",O("varName")],evaluate:function(t){var e=gt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)[o.evaluateExpression(n)]}},{pattern:[O("Dictionary",{thisType:!0}),"[",g(O("String"),O("Number")),"]"],evaluate:function(t){var e=gt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r)[o.evaluateExpression(n)]}},{pattern:[O("Iterable",{thisType:!0}),"[",O("Integer"),"]"],evaluate:function(t){var e=gt(t.tokens,3),r=e[0],n=(e[1],e[2]),o=t.context;return o.evaluateExpression(r).getIndex(o.evaluateExpression(n))}},{pattern:[O("Function",("A",{genericType:"A"}),{thisType:!0}),O("Object")],genericTypes:{A:"Object"},evaluate:function(t){var e=gt(t.tokens,2),r=e[0],n=e[1],o=t.context;return o.evaluateExpression(r).call(o.evaluateExpression(n))}}]};var St=["pattern"];function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function jt(t){return function(t){if(Array.isArray(t))return Et(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Et(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Et(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function At(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(r),!0).forEach((function(e){Pt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Pt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Ot(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ot(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var It=function t(e,r){return e.map((function(e){if(e.metaType){switch(e.metaType){case"or":return At(At({},e),{},{patterns:e.patterns.map((function(e){return t(e,r)}))});case"multi":case"subcontext":return At(At({},e),{},{pattern:t(e.pattern,r)});case"anychar":return e}throw"Invalid metatype: ".concat(e.metaType)}return e.thisType?O(r):e}))},Tt=function(t,e){var r=t.pattern;return At(At({},function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,St)),{},{pattern:It(r,e)})},Nt=function(t,e){var r=[];return e.generics.genericSubtypeRules[t]&&r.push(e.generics.genericSubtypeRules[t][0]),r.push.apply(r,jt(e.rules[t].map((function(e){return Tt(e,t)})))),e.generics.genericParents[t]&&r.push.apply(r,jt(e.generics.genericParents[t].flatMap((function(r){return e.rules[r].map((function(e){return Tt(e,t)}))})))),r};function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Dt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Mt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(r),!0).forEach((function(e){Vt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Vt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Lt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==Lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Lt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _t=function(){return{whitelist:a((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(""))}},Ct=function t(e,r){return"string"==typeof r?Rt(e,r):e.whitelist?r.whitelist?{whitelist:Mt(Mt({},e.whitelist),r.whitelist)}:{blacklist:s(r.blacklist,e.whitelist)}:r.whitelist?t(r,e):{blacklist:l(e.blacklist,r.blacklist)}},Rt=function(t,e){return Ct(t,_t(e))},Gt=function(t,e){return t.whitelist?e.split("").every((function(e){return t.whitelist[e]})):e.split("").every((function(e){return!t.blacklist[e]}))};function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(t)}var Ft=function(t){return"object"!==$t(t)},Ut=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(e?G("[","magenta"):"")+t.map((function(t){return Bt(t,r)})).join("")+(e?G("]","magenta"):"")},Bt=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Array.isArray(t))return Ut(t,!1,e);if(t.type)return G("{".concat(t.type,"}"),"red");if(t.metaType)switch(t.metaType){case"or":return G("(","green")+"".concat(t.patterns.map((function(t){return Ut(t,!1,e)})).join(G(" | ","green")))+G(")","green");case"multi":if("space"===t.pattern[0].type&&e)return" ";var r=Ut(t.pattern,!1,e);if(t.max>=Number.MAX_SAFE_INTEGER/2)return 0===t.min?r+G("*","yellow"):1===t.min?r+G("+","yellow"):r+G("{".concat(t.min,"}"),"yellow");if(1===t.max){if(t.ignoreWeirdMulti)return r;if(0!==t.min)throw"Weird multi metatype: min=".concat(t.min," max=1");return r+G("?","yellow")}return r+G("{".concat(t.min,", ").concat(t.max,"}"),"yellow");case"anychar":return Wt(t.tokenDict);case"subcontext":return G("<","red")+Ut(t.pattern,!1,e)+G(">","red");default:throw"Not implemented: Stringify metatype ".concat(t.metaType)}return'"'.concat(t,'"')},Wt=function t(e){return e.whitelist?G("[".concat(Object.keys(e.whitelist).join(""),"]"),"blue"):e.blacklist?G("[".concat("NOT ".concat(Object.keys(e.blacklist).join("")),"]"),"blue"):t(_t(e))};function Xt(t){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(t)}function Yt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||Qt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function zt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qt(Object(r),!0).forEach((function(e){Ht(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ht(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Xt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==Xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Xt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jt(t){return function(t){if(Array.isArray(t))return Zt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Qt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Qt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function Qt(t,e){if(t){if("string"==typeof t)return Zt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zt(t,e):void 0}}function Zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var te=W((function(t,e,r,n){if("string"!=typeof t)throw"Complex types are not allowed quite yet! But also this could just be an error with the typeType() or genericType() stuff cuz that shouldnt ever get here";if(!n.rules[t])return{error:"Invalid type: ".concat(t)};var o=ne(t,e,n);if(o.error)return o;var i,a=Kt(Nt(t,n));try{for(a.s();!(i=a.n()).done;){var u=i.value,c=re(u.pattern,e,u,r,n);if(!c.error){var l={type:t,tokens:c,evaluate:u.evaluate,sourceString:e,lineNumber:r};return u.onParse&&u.onParse(l,n),l}}}catch(t){a.e(t)}finally{a.f()}return{error:'"'.concat(e,'" did not match any pattern of type: ').concat(t,"!")}}),"parseExpressionAsType",[function(t){return Bt({type:t})},Bt],Bt),ee=W((function(t,e,r,n){switch(t.metaType){case"or":var o,i=Kt(t.patterns);try{for(i.s();!(o=i.n()).done;){var a=o.value,u=re(a,e,void 0,r,n);if(!u.error)return u}}catch(t){i.e(t)}finally{i.f()}return{error:'"'.concat(e,'" did not match any pattern in list: ').concat(Bt(t),"!")};case"multi":if(t.min<=0&&""===e)return[];if(t.max<=0&&""!==e)return{error:"Maximum length reached"};var c=re([].concat(Jt(t.pattern),[zt(zt({},t),{},{min:Math.max(t.min-1,0),max:Math.max(t.max-1,0)})]),e,void 0,r,n);return c.error?c:ae(t.pattern,c);case"anychar":return Gt(t.tokenDict,e)?e:{error:'There do not exist any possible matches of "'.concat(e,'" on pattern ').concat(Ut([t]),"!")};case"subcontext":return re(t.pattern,e,void 0,r,t.getSubcontext())}return{error:"Invalid metaType: ".concat(t.metaType)}}),"parseExpressionAsMetatype",[Bt,Bt],"Parsed"),re=W((function(t,e,r,n,o){var i=ie(t,e,o);if(0===i.length)return{error:'There do not exist any possible matches of "'.concat(e,'" on pattern ').concat(Ut(t),"!")};r&&r.associativityReverseSearchOrder&&i.reverse();var a,u=Kt(i);try{t:for(u.s();!(a=u.n()).done;){var c,l=a.value,s=[],f=Kt(t.entries());try{for(f.s();!(c=f.n()).done;){var p=Yt(c.value,2),y=p[0],v=p[1],m=e.slice(l[y-1]||0,l[y]);if(Ft(v)){if(v!==m)continue t;s.push(v)}else if(v.metaType){var b=ee(v,m,n,o);if(b.error)continue t;s.push(b)}else{var h=te(v.type,m,n,o);if(h.error)continue t;s.push(h)}}}catch(t){f.e(t)}finally{f.f()}return s}}catch(t){u.e(t)}finally{u.f()}return{error:'All possible matches of "'.concat(e,'" on pattern ').concat(Ut(t)," failed.")}}),"parseExpressionAsPattern",[Ut,Bt],Ut),ne=function(t,e,r){for(var n in r.heuristics){var o=r.heuristics[n].tests.fromType(t,e);if(o.error)return o}return{}},oe=function t(e,r,n){if("anychar"===e.metaType)return 1===r.length&&Gt(e.tokenDict,r)?{}:{error:'There do not exist any possible matches of "'.concat(r,'" on pattern ').concat(Ut([e]),"!")};if("subcontext"===e.metaType)return t(zt(zt({},e),{},{metaType:"multi",min:1,max:1,ignoreWeirdMulti:!0}),r,e.getSubcontext());for(var o in n.heuristics){var i=n.heuristics[o].tests.fromPattern([e],r);if(i.error)return i}return{}},ie=W((function(t,e,r){if(0===t.length)return 0===e.length?[[]]:[];if(r.heuristics.minLength.tests.fromPattern(t,e).error)return[];var n=t[0];if(Ft(n))return e.slice(0,n.length)!==n?[]:ie(t.slice(1),e.slice(n.length),r).map((function(t){return[n.length].concat(Jt(t.map((function(t){return t+n.length}))))}));for(var o=[],i=function(i){if(n.type){if(ne(n.type,e.slice(0,i),r).error)return"continue"}else if(oe(n,e.slice(0,i),r).error)return"continue";o.push.apply(o,Jt(ie(t.slice(1),e.slice(i),r).map((function(t){return[i].concat(Jt(t.map((function(t){return t+i}))))}))))},a=0;a<=e.length;a++)i(a);return o}),"getPossibleMatches",[Ut,Bt],(function(t){return t.length})),ae=function t(e,r){if(0===r.length)return[];if(r.length===e.length)return r.map((function(t){return t}));var n=r.slice(0,r.length-1),o=t(e,r[r.length-1]);return 0===o.length?n.map((function(t){return[t]})):e.map((function(t,e){return[n[e]].concat(Jt(o[e]))}))};function ue(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ce(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function ce(t,e){if(t){if("string"==typeof t)return le(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(t,e):void 0}}function le(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var se={Object:["Function","Integer","Number","String","Boolean","DiscreteRange","List","Iterable","Dictionary"]};const fe={genericSubtypeRules:_(function(t){for(var e={},r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];e[o]=[{pattern:[g.apply(void 0,(i=t[o].map((function(t){return O(t)})),function(t){if(Array.isArray(t))return le(t)}(i)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||ce(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))]}]}var i;return e}(se)),genericParents:function(t){for(var e={},r=0,n=Object.keys(t);r<n.length;r++){var o,i=n[r],a=ue(t[i]);try{for(a.s();!(o=a.n()).done;){var u=o.value;e[u]?e[u].push(i):e[u]=[i]}}catch(t){a.e(t)}finally{a.f()}}return e}(se)};function pe(t){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pe(t)}function ye(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ve(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function me(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==pe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===pe(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var be=function(t){return function(e){var r,n,o=X(t,e),i=o.heuristicName,a=o.initialTokenValue,u=o.initialPatternValue,c=o.unresolvedValue,l=o.combinePatternValues,s=o.combineTokenValues,f=o.getTerminalTokenValue,p=o.getTokenDictValue,y=o.getMultiMetatypeValue,v=void 0===y?void 0:y,m=o.test,b=o.killPatternList,h=void 0===b?function(){return!1}:b,d=o.killPattern,g=void 0===d?function(){return!1}:d,w=o.patternReverseOrder,x=void 0!==w&&w,S=o.finalCheck,O=void 0===S?function(){}:S,j=o.allowAllEmptyExpressions,E=void 0===j||j,k={},A=!0,P={heuristicName:i,values:{fromType:function(t){var o=A;return o&&(A=!1,r={},n=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ve(Object(r),!0).forEach((function(e){me(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},k)),void 0!==n[t]?(o&&(A=!0),n[t]):r[t]?X(c):(r[t]=!0,n[t]=P.values.fromPatternList(Nt(t,e).map((function(t){return t.pattern}))),o&&(k[t]=n[t],O(k[t],t),A=!0),n[t])},fromToken:function(t){if(Ft(t))return f(t);if(!t.metaType)return P.values.fromType(t.type);switch(t.metaType){case"or":return P.values.fromPatternList(t.patterns);case"multi":var e=function(){return P.values.fromPattern(t.pattern)};return v?v(t,e):e();case"anychar":return p(t);case"subcontext":return P.values.fromSubcontext(t)}},fromPattern:function(t){for(var e=X(u),r=0;r<t.length;r++){var n=t[x?t.length-1-r:r];if(e=s(e,P.values.fromToken(n)),g(e,n))break}return e},fromPatternList:function(t){var e,r=X(a),n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return ye(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ye(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(r=l(r,P.values.fromPattern(o)),h(r))break}}catch(t){n.e(t)}finally{n.f()}return r},fromSubcontext:function(t){return e.parentContexts[t.subcontextId]?P.values.fromPattern(t.pattern):t.getSubcontext().heuristics[i].values.fromPattern(t.pattern)}},tests:{fromType:function(t,e){if(E&&0===e.length)return!0;var r=P.values.fromType(t);return m(e,r)||{error:'"'.concat(e,'" failed the heuristic test "').concat(i,'" for type: ').concat(G("{".concat(t,"}"),"red"),"!"),value:r}},fromPattern:function(t,e){if(E&&0===e.length)return!0;var r=P.values.fromPattern(t);return m(e,r)||{error:'"'.concat(e,'" failed the heuristic test "').concat(i,'" for meta-type: ').concat(Ut(t),'!"'),value:r}}}};return P}};function he(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var de=be({heuristicName:"allowedCharacters",initialTokenValue:_t,initialPatternValue:_t,unresolvedValue:_t,combinePatternValues:Ct,combineTokenValues:Ct,getTerminalTokenValue:function(t){return t},getTokenDictValue:function(t){return t.tokenDict},test:function(t,e){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return he(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?he(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(!Gt(e,o))return!1}}catch(t){n.e(t)}finally{n.f()}return!0},killPatternList:function(t){return t.blacklist&&!Object.keys(t.blacklist).length},killPattern:function(t){return t.blacklist&&!Object.keys(t.blacklist).length}}),ge=be((function(t){return{heuristicName:"allowedEndCharacters",initialTokenValue:_t,initialPatternValue:_t,unresolvedValue:_t,combinePatternValues:Ct,combineTokenValues:Ct,getTerminalTokenValue:function(t){return t[t.length-1]},getTokenDictValue:function(t){return t.tokenDict},test:function(t,e){return Gt(e,t[t.length-1])},killPatternList:function(t){return t.blacklist&&!Object.keys(t.blacklist).length},killPattern:function(e,r){return!(!e.blacklist||Object.keys(e.blacklist).length)||t.heuristics.minLength.values.fromToken(r)>0},patternReverseOrder:!0}})),we=be((function(t){return{heuristicName:"maxLength",initialPatternValue:0,initialTokenValue:0,unresolvedValue:Number.MAX_SAFE_INTEGER,combineTokenValues:function(t,e){return t+e},combinePatternValues:Math.max,getTerminalTokenValue:function(t){return t.length},getTokenDictValue:function(){return 1},getMultiMetatypeValue:function(e,r){return 0===e.max?(t.heuristicsGenerated||P("You have a multi token with a max length of 0, this should probably never happen."),0):r()*e.max},test:function(t,e){return t.length<=e},killPatternList:function(t){return t>=Number.MAX_SAFE_INTEGER},killPattern:function(t){return t>=Number.MAX_SAFE_INTEGER},allowAllEmptyExpressions:!1}})),xe=be({heuristicName:"minLength",initialTokenValue:Number.MAX_SAFE_INTEGER,initialPatternValue:0,unresolvedValue:Number.MAX_SAFE_INTEGER,combinePatternValues:Math.min,combineTokenValues:function(t,e){return t+e},getTerminalTokenValue:function(t){return t.length},getTokenDictValue:function(){return 1},getMultiMetatypeValue:function(t,e){return 0===t.min?0:e()*t.min},test:function(t,e){return t.length>=e},killPatternList:function(t){return 0===t},killPattern:function(t){return t>=Number.MAX_SAFE_INTEGER},finalCheck:function(t,e){t>=Number.MAX_SAFE_INTEGER&&P('Warning: Type "'.concat(e,'" has a minimum length of ').concat(t," (Probably an unclosed rule loop)"))},allowAllEmptyExpressions:!1}),Se=be((function(t){return{heuristicName:"allowedStartCharacters",initialTokenValue:_t,initialPatternValue:_t,unresolvedValue:_t,combinePatternValues:Ct,combineTokenValues:Ct,getTerminalTokenValue:function(t){return t[0]},getTokenDictValue:function(t){return t.tokenDict},test:function(t,e){try{return Gt(e,t[0])}catch(r){console.log(e,"'".concat(t,"'"))}},killPatternList:function(t){return t.blacklist&&!Object.keys(t.blacklist).length},killPattern:function(e,r){return!(!e.blacklist||Object.keys(e.blacklist).length)||t.heuristics.minLength.values.fromToken(r)>0}}})),Oe=function(t,e,r){for(var n={rules:t,generics:e,parentContexts:r,heuristics:{}},o=0,i=[xe,we,de,Se,ge];o<i.length;o++){var a=(0,i[o])(n);n.heuristics[a.heuristicName]=a,delete a.heuristicName}return n.heuristicsGenerated=!0,n.heuristics};function je(t){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(t)}function Ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ke(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ae(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ke(Object(r),!0).forEach((function(e){Pe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Pe(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==je(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===je(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ie=function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=Ae(Ae({},function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{rules:U(t),generics:U(e),heuristics:Oe(t,e,r),parentContexts:U(r)}}(function(t,e){var r=Object.keys(t).reduce((function(e,r){return v(v({},e),{},m({},r,f(t[r])))}),{});for(var n in e){var o;n in r?(o=r[n]).push.apply(o,f(e[n])):r[n]=e[n]}return r}(Be,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),fe,t)),{},{vars:[],setVariable:function(t,r,n){var o;null!==(o=e.vars[t])&&void 0!==o&&o.type&&e.vars[t].type!==r&&(P("Warning: Changing type of variable ".concat(t," (").concat(e.vars[t].type," -> ").concat(r,")")),e.rules[e.vars[t].type]=e.rules[e.vars[t].type].filter((function(e){var r=e.pattern;return 1!==r.length&&r[0]!==t})),delete e.vars[t]),void 0===e.vars[t]&&(e.rules[r].push({pattern:[t],evaluate:function(){return e.vars[t].value}}),e.heuristics=Oe(e.rules,e.generics,e.parentContexts)),e.vars[t]={value:n,type:r}}});return e.evaluateExpression=function(t){return function(e,r){if(!e.evaluate){if(e.length)return t.evaluateExpression(e[0]);throw"not sure what happened"}if(["Statement","Instantiator"].includes(e.type))switch(t.ranIfStatement){case!0:t.ranIfStatement=1;break;case!1:t.ranIfStatement=0;break;default:t.ranIfStatement=void 0}var n=0,o=e.unparsedStatements&&{hasNext:function(){return e.unparsedStatements[n]},next:function(){n++,r(e.unparsedStatements[n-1],t)},iterateToEnd:function(){for(;o.hasNext();)o.next()},restart:function(){return n=0}};return e.evaluate({tokens:e.tokens,sourceString:e.sourceString,lineNumber:e.lineNumber,childIterator:o,context:t})}}(e),e},Te=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ie(),n=e.instantiatorStatement,o=e.statements,i=e.lineNumber,a=e.line,u=e.parsedNode;if(o){if(n){var c=u||te("Instantiator",n.line,i,r);if(c.error)throw F(c.error,i,"Parsing Error");return e.parsedNode=c,void r.evaluateExpression(Ae(Ae({},c),{},{unparsedStatements:o,lineNumber:i}),t)}Ne(o,r)}else{var l=u||te("Statement",a,i,r);if(l.error)throw F(l.error,i,"Parsing Error");e.parsedNode=l,r.evaluateExpression(Ae(Ae({},l),{},{lineNumber:i}))}},Ne=function(t,e){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Ee(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ee(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(e.breakingLoop||e.continuingLoop)break;Te(o,e)}}catch(t){n.e(t)}finally{n.f()}};function Le(t){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Le(t)}function De(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const Me={Function:[{pattern:["fn",":",(Ve=[O("Object")],_e=function(t){return Ie({Number:[{pattern:["$"],evaluate:function(t){return t.context.vars.$.value}}]},(e={},n=!0,(r=function(t){var e=function(t,e){if("object"!==Le(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Le(e)?e:String(e)}(r=t))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e));var e,r,n},Ce={metaType:"subcontext",pattern:Ve,subcontextId:++j,getSubcontext:function(){if(Ce.subcontext)return Ce.subcontext;var t=_e(Ce.subcontextId);return Ce.subcontext=t,Ce.subcontext}},Ce)],evaluate:function(t){var e,r,n=(e=t.tokens,r=3,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,r)||function(t,e){if(t){if("string"==typeof t)return De(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?De(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=(n[0],n[1],n[2]);return{asString:Re(o),call:function(t){var e=Ie();return e.setVariable("$",nt(t),t),e.evaluateExpression(o)}}}}]};var Ve,_e,Ce,Re=function(t){return"(Function)"};function Ge(t){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ge(t)}function $e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Fe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$e(Object(r),!0).forEach((function(e){Ue(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ue(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Ge(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ge(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const Be=_(Fe(Fe(Fe(Fe(Fe(Fe(Fe(Fe(Fe({space:[{pattern:[" "]}],digit:[{pattern:[h("0123456789")]}]},K),rt),at),ut),mt),dt),xt),z),Me));function We(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Xe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xe(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function Xe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const Ye=function(t){var e,r,n=t.split(/\r\n|\n\r|\n|\r/g).map((function(t,e){return{lineNumber:e+1,line:t}})),o=function(t){var e,r=[],n=!1,o=We(t);try{for(o.s();!(e=o.n()).done;){for(var i=e.value,a=i.lineNumber,u=i.line,c="",l=u;l;){if(n){var s=l.search(/###/);if(-1===s)break;l=" ".concat(l.substring(s+3)),n=!1}var f=l.search(/#/);if(-1===f){c+=l;break}if(c+=l.substring(0,f),"###"!==u.substring(f,f+3))break;l=l.substring(f+3),n=!0}c.match(/^\s*$/)||r.push({lineNumber:a,line:c.replace(/\s+$/gm,"")})}}catch(t){o.e(t)}finally{o.f()}return r}(n),i={statements:[]},a=0,u=i,c=We(o);try{for(c.s();!(r=c.n()).done;){var l=r.value,s=l.lineNumber,f=l.line,p=f.match(/^\s*/g)[0].length;if(void 0===e)e=p,u.indent=e;else if(p<e)throw F("Line indented deeper than start of file! (Line: ".concat(p,", File: ").concat(e,")"),s,"Preparsing Error");var y={lineNumber:s,line:f.substring(p)};if(p!==a){if(p>a){var v={instantiatorStatement:u.statements.splice(u.statements.length-1)[0],statements:[y],parent:u,indent:p};u.statements.push(v),u=v}else for(;p!==u.indent;){if(!u.parent)throw F("Did not indent back to any parent indentation! (Line: ".concat(p,")"),s,"Preparsing Error");var m=u.parent;delete u.parent,delete u.indent,(u=m).statements.push(y)}a=p}else u.statements.push(y)}}catch(t){c.e(t)}finally{c.f()}for(;u!==i;){var b=u.parent;delete u.parent,delete u.indent,u=b}return delete u.indent,i};function qe(t){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qe(t)}function ze(){ze=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new E(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function y(){}function v(){}var m={};c(m,i,(function(){return this}));var b=Object.getPrototypeOf,h=b&&b(b(k([])));h&&h!==e&&r.call(h,i)&&(m=h);var d=v.prototype=p.prototype=Object.create(m);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=s(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==qe(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=S(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return y.prototype=v,n(d,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:y,configurable:!0}),y.displayName=c(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,u,"GeneratorFunction")),t.prototype=Object.create(d),t},t.awrap=function(t){return{__await:t}},g(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(d),c(d,u,"Generator"),c(d,i,(function(){return this})),c(d,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function He(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Je(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var Ke=function(){var t,e=(t=ze().mark((function t(e){var r,n;return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k.exitOnError=!1,Be.Statement.push({pattern:["exit"],evaluate:function(){return process.exit(0)}}),Be.Statement.push({pattern:Be.Statement[0].pattern.slice(2),evaluate:function(t){var e,r,n=(e=t.tokens,r=1,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,r)||function(t,e){if(t){if("string"==typeof t)return He(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?He(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],o=t.context;Q(o.evaluateExpression(n)),A("\n")}}),r=Ie(),A("Welcome to Cuttlefish v2.0.a\n");case 5:return t.next=8,e();case 8:n=t.sent;try{Te(Ye(n),r)}catch(t){console.error(t)}t.next=5;break;case 12:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Je(i,n,o,a,u,"next",t)}function u(t){Je(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();function Qe(t){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qe(t)}function Ze(){Ze=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new E(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function y(){}function v(){}var m={};c(m,i,(function(){return this}));var b=Object.getPrototypeOf,h=b&&b(b(k([])));h&&h!==e&&r.call(h,i)&&(m=h);var d=v.prototype=p.prototype=Object.create(m);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=s(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Qe(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=S(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return y.prototype=v,n(d,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:y,configurable:!0}),y.displayName=c(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,u,"GeneratorFunction")),t.prototype=Object.create(d),t},t.awrap=function(t){return{__await:t}},g(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(d),c(d,u,"Generator"),c(d,i,(function(){return this})),c(d,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function tr(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function er(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){tr(i,n,o,a,u,"next",t)}function u(t){tr(i,n,o,a,u,"throw",t)}a(void 0)}))}}var rr=document.getElementById("terminal"),nr=document.getElementById("cursor");k.consoleWrite=function(t){return rr.value+=t},k.consoleError=function(t){return rr.value+=t+"\n"},k.colors=!1;var or=function(t){var e=Math.max(rr.selectionStart,t),r=Math.floor((window.innerWidth-4)/8),n=(3+e-t-1)%r+1;n<0&&(n+=r-1);var o=rr.value.slice(0,e).split("\n").reduce((function(t,e){return t+Math.ceil(e.length/r)}),0)-1;nr.style.left="".concat(2+8*n,"px"),nr.style.top="".concat(2+15.5*o-rr.scrollTop,"px")};Ke(er(Ze().mark((function t(){var e,r;return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return rr.value+="$> ",e=rr.value.length,r=new Promise((function(t){window.onkeydown=function(r){if("Enter"===r.key)return rr.value+="\n",r.preventDefault(),t(rr.value.slice(e,-1));"Backspace"===r.key?rr.selectionStart===e?r.preventDefault():rr.selectionStart<e?rr.selectionStart=e:rr.selectionStart===rr.selectionEnd&&rr.selectionStart--:"ArrowLeft"===r.key?rr.selectionStart===e&&r.preventDefault():("ArrowUp"===r.key||"ArrowDown"===r.key)&&r.preventDefault()},document.onselectionchange=function(){return or(e)},window.onresize=function(){return or(e)},rr.onscroll=function(){return or(e)}})),rr.scrollTo(0,rr.scrollHeight),t.next=6,r;case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)}))))})();